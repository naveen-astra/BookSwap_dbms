{% extends "base.html" %}
{% block content %}

<div class="page-header text-center">
    <div class="container">
        <h1 class="page-title">
            <i class="fas fa-book-open me-2"></i>Available Books
        </h1>
        <p class="page-subtitle">Discover amazing books waiting to be swapped</p>
    </div>
</div>

{% if books %}
<div class="container">
    <div class="table-responsive dark-table">
        <table class="table table-hover align-middle dark-table-content">
            <thead>
                <tr>
                    <th><i class="fas fa-book me-2"></i>Title</th>
                    <th><i class="fas fa-user me-2"></i>Author</th>
                    <th><i class="fas fa-tags me-2"></i>Genre</th>
                    <th><i class="fas fa-exchange-alt me-2"></i>Action</th>
                </tr>
            </thead>
            <tbody>
            {% for book in books %}
                <tr>
                    <td class="fw-bold">
                        <a href="{{ url_for('book_details', book_id=book.book_id) }}" 
                           class="text-decoration-none text-primary fw-bold book-title-link">
                            {{ book.title }}
                        </a>
                    </td>
                    <td>{{ book.author }}</td>
                    <td>
                        <span class="status-badge status-available">{{ book.genre }}</span>
                    </td>
                    <td>
                        {% if book.request_sent %}
                            <span class="status-badge status-pending">
                                <i class="fas fa-clock me-1"></i>Request Sent
                            </span>
                        {% else %}
                            <a href="{{ url_for('send_request', book_id=book.book_id) }}" 
                               class="btn btn-primary btn-sm">
                                <i class="fas fa-paper-plane me-1"></i>Send Request
                            </a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="container text-center">
    <div class="card">
        <div class="card-body">
            <i class="fas fa-book-open fa-3x text-muted mb-3"></i>
            <h4 class="text-muted">No Books Available</h4>
            <p class="text-muted">No books are currently available for swap. Check back later!</p>
            <a href="{{ url_for('add_book') }}" class="btn btn-primary">
                <i class="fas fa-plus me-1"></i>Add Your First Book
            </a>
        </div>
    </div>
</div>
{% endif %}

<style>
/* Override Bootstrap table styling with dark theme */
.dark-table {
    background: rgba(26, 26, 46, 0.9) !important;
    border-radius: 15px !important;
    overflow: hidden !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.dark-table-content {
    background: rgba(26, 26, 46, 0.9) !important;
    color: #e8e9fa !important;
    border-radius: 15px !important;
    overflow: hidden !important;
}

.dark-table-content thead {
    background: linear-gradient(135deg, #00d4aa, #007acc) !important;
    color: white !important;
}

.dark-table-content thead th {
    border: none !important;
    padding: 1.2rem 1rem !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-size: 0.9rem !important;
    color: white !important;
    background: transparent !important;
}

.dark-table-content tbody tr {
    transition: all 0.3s ease !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    background: rgba(26, 26, 46, 0.8) !important;
}

.dark-table-content tbody tr:hover {
    background: rgba(0, 212, 170, 0.1) !important;
    transform: scale(1.02) !important;
    box-shadow: 0 5px 15px rgba(0, 212, 170, 0.2) !important;
}

.dark-table-content tbody td {
    border: none !important;
    padding: 1rem !important;
    vertical-align: middle !important;
    color: #e8e9fa !important;
    background: transparent !important;
}

/* Enhanced status badges with better contrast */
.status-badge {
    padding: 0.5rem 1rem !important;
    border-radius: 20px !important;
    font-size: 0.85rem !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    display: inline-flex !important;
    align-items: center !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2) !important;
    border: 2px solid !important;
}

.status-available {
    background: rgba(0, 212, 170, 0.2) !important;
    color: #00ffcc !important;
    border-color: #00d4aa !important;
}

.status-pending {
    background: rgba(255, 193, 7, 0.2) !important;
    color: #ffd700 !important;
    border-color: #ffc107 !important;
}

.book-title-link {
    transition: all 0.3s ease !important;
    position: relative !important;
}

.book-title-link:hover {
    color: #00ffcc !important;
    text-shadow: 0 0 8px rgba(0, 255, 204, 0.3) !important;
    transform: translateX(5px) !important;
}

.book-title-link:hover::after {
    content: ' üëÅÔ∏è';
    font-size: 0.8em;
    opacity: 0.7;
}
</style>

{% endblock %}